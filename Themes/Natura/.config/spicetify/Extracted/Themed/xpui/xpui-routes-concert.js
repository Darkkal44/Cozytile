"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7288],{92332:(e,t,s)=>{s.d(t,{Z:()=>N});var n=s(59496),a=s(65748),r=s(60378),i=s(9719),c=s(66630),o=s(63355),l=s(25362),d=s(40343);const m="MUiWCNTfb6FcSwVPvQ1V",h="UAk3bMhekwJTV_wIyfsT",g="X9w6LPfKsZHMCs38sVIQ",u="NXn5KjeUOjLGlAfS1Gao",x="N0wgFMDDvCiby4QB5kLJ",j="nloNe2BLRHjz9dxlwfLU",p="JzXND83mXvcEuntCNR34",v="GR08E4L_rOGljyQQX30R";var y=s(4637);const N=(0,n.memo)((e=>{const{concert:t,isVirtual:s,onClick:n}=e,{venue:N,location:f}=t,k=t.artists[0],C=(0,l.CH)(t.startDate.localDate);return(0,y.jsxs)(i.Link,{to:`/concert/${t.id}`,className:m,onClick:n,children:[k.imageUri&&(0,y.jsx)(c.Z,{children:(0,y.jsx)("div",{role:"img",className:v,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${k.imageUri})`}})}),(0,y.jsx)("time",{className:h,dateTime:t.startDate.localDate,children:(0,y.jsx)(a.D,{as:"h5",variant:"mestoBold",children:(0,l.jx)(C)})}),(0,y.jsxs)("div",{className:g,dir:"auto",children:[(0,y.jsxs)(a.D,{as:"h2",className:p,variant:"mesto",children:[(0,o.FO)(C)," • ",(0,l.hK)(C)]}),(0,y.jsx)(a.D,{as:"h2",variant:"cello",weight:"bold",className:u,children:(0,d.ij)(t)}),(0,y.jsx)("div",{className:x,children:(0,y.jsx)(a.D,{as:"h2",className:j,variant:"mesto","data-testid":"location-name",children:s?N:[N,f].join(r.ag.getSeparator())})})]})]})}))},54482:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Re});var n=s(75387),a=s(90641),r=s(92053),i=s(60378),c=s(37277),o=s(72254),l=s(21015);const d=e=>{const[t,{username:s,concertUri:n}]=e.queryKey;return(async(e,t)=>{const s=await(0,l.checkConcertInCollection)(o.b.getInstance(),e,t);return s.body?.found[0]})(s,n)};var m=s(35841),h=s(59496),g=s(65748),u=s(1413),x=s(64093),j=s(56916),p=s(62256),v=s(37611),y=s(26553),N=s(65476),f=s(70357),k=s(77741),C=s(84875),b=s.n(C),D=s(23362),_=s(24049),I=s(32307),S=s(69062),w=s(75115),L=s(90929),U=s(78061),P=s(16192),A=s(1765),T=s(60811),K=s(4637);const F=h.memo((function({uri:e}){const{spec:t}=(0,P.T)(e);return(0,K.jsx)(U.ZP,{value:"concert",children:(0,K.jsxs)(L.v,{children:[(0,K.jsxs)(A.q,{children:[(0,K.jsx)(T.Jx,{spec:t,uri:e,displayText:i.ag.get("context-menu.copy-concert-link")}),(0,K.jsx)(T.W2,{spec:t,uri:e})]}),(0,K.jsx)(T.h$,{spec:t,uri:e})]})})}));var E=s(9719),V=s(78241),M=s(40530),R=s(27203),$=s(39937),z=s(85345),O=s(92832),Y=s(20123);const W="rvw6x7R5AiAT48dSkFl9",Z="JRuVlk6wpKk6ok7zuW6l",H="YpfopxY2udneDY34uzRN",Q="KI_0F1jtTR5tWgl7gZ1E",G="gKtc3TdowDTXBaVESi1D",J="V8TIr8yJq4tYZfPEzm12",X="VvL91cIRcCi1hJh0K845",q="vKcnOO1GNYoLKHg4T4lK",B="LdW0YNvo_Y77hgqhL4zY",ee="cTkykhjfHxkEGKbxSxXw",te="XgeTnLs82tTjczDR6oKn",se="P3fE7wn6Tqnibn3gljKV",ne="A8LG_5Dvp7IiXDtdR571",ae="OVY7plwgy_AKAzhgoCAF",re="O0PSSw8ttrMn9lzq_L16",ie="D_ffrfn62aOgZKOFfZVr",ce="OH4mOZCual2ejIodzIkL",oe="se_ixDV6hBf7lve861oU",le="YDAJHPP5lDmg71SdvJZC",de="lKQxSRsi8KcoYx5D7mjh",me="LUMel_X4gQK0J1i6X0sC",he="s1jEHgfOLzeY3WugmaoT",ge=(0,h.memo)((e=>{const{concertUri:t,position:s,ticketer:n,spec:a}=e,r=(0,k.$P)(),i=(0,z.o)(),c=(0,h.useMemo)((()=>a.ticketProviderCellFactory({identifier:n.partnerDisplayName,position:s,uri:n.url})),[a,n.partnerDisplayName,s,n.url]),o=(0,k.Wi)(c);return(0,K.jsxs)(E.default,{to:n.url,className:te,onClick:()=>{const e=c.hitNavigateToExternalUri({destination:n.url});r.logInteraction(e),i({targetUri:t,intent:"find-concert",type:"click"})},ref:o,children:[(0,K.jsx)("div",{className:se,children:(0,K.jsx)(Y.Ee,{loading:"eager",srcSet:n.imageURL,src:n.imageURL,height:"100%",width:"100%",children:(0,K.jsx)($.i,{className:ne,iconSize:24})})}),(0,K.jsxs)("div",{className:re,children:[(0,K.jsx)(g.D.span,{children:n.partnerDisplayName}),(0,K.jsx)(O.h,{className:ae,iconSize:24})]})]},n.url)}));var ue=s(25362);const xe=(0,h.memo)((e=>{const{concert:t,onClick:s}=e,{category:n,venue:a,location:r,lat:i,lon:c}=t;if("ONLINE"===n)return(0,K.jsx)(g.D,{as:"h3",variant:"canon",children:a});const o=new URL("https://maps.google.com/");return o.searchParams.set("q",`${a},${r}`),o.searchParams.set("ll",`${i},${c}`),(0,K.jsx)(E.default,{to:o.href,target:"_blank",onClick:()=>s(o.href),children:(0,K.jsxs)(g.D,{as:"h3",variant:"canon",children:[a,", ",r]})})})),je=(0,h.memo)((e=>{const{concert:t,ticketAvailabilityTranslated:s,entitySpec:n,isConcertSaved:a,isAnonymous:r,onInterestedClick:c}=e,d=(0,h.useMemo)((()=>n.ticketProviderListFactory()),[n]),m=(0,k.$P)(),u=(0,k.Wi)(d),x=(0,h.useMemo)((()=>n.interestedButtonFactory()),[n]),j=(0,k.Wi)(x),p=(0,ue.CH)(t.date),v=`spotify:concert:${t.id}`,[y,N]=(0,h.useState)(a),f=(0,S.W6)(V.tp);if(0===t.ticketers.length)return null;if((0,ue.OF)(t.date))return(0,K.jsxs)("div",{className:B,children:[(0,K.jsx)(g.D,{as:"h3",variant:"canon",children:i.ag.get("concert_event_ended")}),(0,K.jsx)(g.D,{variant:"ballad",children:(0,K.jsx)(E.default,{to:"spotify:concerts",children:i.ag.get("concert_past_message")})})]});return(0,K.jsxs)("div",{className:B,ref:u,children:[(0,K.jsx)(g.D,{as:"h3",variant:"canon",children:(0,K.jsx)(xe,{concert:t,onClick:e=>{const t=n.venueMapLinkFactory().hitNavigateToExternalUri({destination:e});m.logInteraction(t)}})}),(0,K.jsxs)(g.D,{as:"h3",variant:"mesto",className:le,children:[(0,ue.xE)(p)," • ",(0,ue.hK)(p)]}),(0,K.jsx)(g.D,{as:"h3",className:q,variant:"mesto",children:(C=t.ticketers,0===C.length?null:1===C.length?i.ag.get("concert.header.tickets_from_1",C[0].partnerDisplayName):2===C.length?i.ag.get("concert.header.tickets_from_2",C[0].partnerDisplayName,C[1].partnerDisplayName):3===C.length?i.ag.get("concert.header.tickets_from_3",C[0].partnerDisplayName,C[1].partnerDisplayName,C[2].partnerDisplayName):i.ag.get("concert.header.tickets_from_4",C[0].partnerDisplayName,C[1].partnerDisplayName,C[2].partnerDisplayName,C.length-3))}),s&&(0,K.jsx)(g.D,{as:"h3",className:q,variant:"mesto",children:s}),(0,K.jsxs)("div",{className:Z,children:[!r&&f&&(0,K.jsx)(M._,{label:i.ag.get("concerts_interested_tooltip"),placement:"top-end",children:(0,K.jsx)(D.P,{buttonSize:"sm",iconLeading:y?_.N:I.S,className:b()(me,{[W]:y}),onClick:()=>{const e=x.hitUiElementToggle();m.logInteraction(e),y?((0,l.unsaveConcert)(o.b.getInstance(),t.id),c(!0,i.ag.get("concerts_removed-from-your-saved-events")),m.logInteraction(x.hitRemoveInterest())):((0,l.saveConcert)(o.b.getInstance(),t.id),c(!0,i.ag.get("concerts_added-to-your-saved-events")),m.logInteraction(x.hitAddInterest())),N(!y)},ref:j,children:i.ag.get("concerts_interested")})}),(0,K.jsx)(R.yj,{menu:(0,K.jsx)(F,{uri:v}),onShow:()=>{const e=n.contextMenuButtonFactory().hitUiReveal();m.logInteraction(e)},children:(0,K.jsx)(w.z,{size:32})})]}),(0,K.jsx)(g.D.h3,{variant:"canon",children:i.ag.get("concert.header.available_tickets_from")}),(0,K.jsx)("div",{className:ee,children:t.ticketers.map(((e,t)=>(0,K.jsx)(ge,{concertUri:v,ticketer:e,position:t,spec:d},t)))})]});var C}));var pe=s(96103),ve=s(10196),ye=s(77153),Ne=s(66630);const fe="bnxKFmECExdcmyBXx9f_",ke="UrPgHWUndGwAWPfONuwd",Ce="pF2W693VDIpPdVTVCsDg",be="YGVuy3Qzaam0CJPc_s4K",De="r5Kj2xQVLHK0hf_J00US",_e="qCN2f5PHVrzAPLvQ0lNc",Ie=(0,h.memo)((e=>{const{entity:t,headliner:s,onClick:n}=e,{imageUri:a,name:r,uri:c}=t;return(0,K.jsxs)(E.Link,{to:c,className:fe,onClick:n,children:[a?(0,K.jsx)(Ne.Z,{children:(0,K.jsx)("div",{"data-testid":"image-container",className:_e,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(18, 18, 18, 0.5) 50.52%, rgba(18, 18, 18, 0.7) 100%), url(${a})`}})}):null,(0,K.jsxs)("div",{className:ke,children:[s&&(0,K.jsx)("div",{className:be,children:(0,K.jsx)(g.D,{as:"h4",variant:"mestoBold",className:De,weight:"bold",children:i.ag.get("concert.label.headliner")})}),(0,K.jsx)(g.D,{as:"h2",variant:"alto",className:Ce,children:r})]})]})})),Se=Ie,we=(0,h.memo)((e=>{const{artist:t,albums:s,position:n,lineupArtistsSpec:a}=e,r=(0,h.useMemo)((()=>a.artistRowFactory({position:n,uri:t.uri})),[a,n,t.uri]),c=(0,k.$P)(),o=0===n,l=`${(0,ye.GJ)(t.id)}:discography`;return(0,K.jsx)(U.ZP,{value:"headered-grid",index:n,children:(0,K.jsx)(k.Nh,{spec:r||null,children:(0,K.jsx)(ve.P,{title:o?i.ag.get("concert_lineup"):"",total:s.length+2,seeAllUri:l,seeAllLabel:i.ag.get("artist-page.show-discography"),onClickShelfSeeAll:()=>{const e=r.seeDiscographyLinkFactory().hitUiNavigate({destination:l});c.logInteraction(e)},children:[(0,K.jsx)(Se,{entity:t,headliner:o,onClick:()=>{const e=r.artistCardFactory().hitUiNavigate({destination:t.uri});c.logInteraction(e)}},`ConcertArtistCard-${t.id}`),null,...s.map(((e,s)=>(0,K.jsx)(pe.r,{index:s,artists:[{uri:t.uri,name:t.name}],images:[{url:e.imageUri,width:100,height:100}],name:e.name,uri:e.uri,sharingInfo:null},e.uri)))]})})},t.uri)})),Le=(0,h.memo)((e=>{const{albums:t,artists:s,entitySpec:n}=e,a=(0,h.useMemo)((()=>n.lineupArtistsFactory()),[n]),r=(0,k.Wi)(a),i=(0,h.useMemo)((()=>{const e={};return t.forEach((t=>{const s=t.artistName;e[s]?e[s].push(t):e[s]=[t]})),e}),[t]);return(0,K.jsx)("div",{className:ie,ref:r,"data-testid":"concert-lineup",children:s.map(((e,t)=>(0,K.jsx)(we,{artist:e,albums:i[e.name]||[],position:t,lineupArtistsSpec:a},e.uri)))})})),Ue="y4xsX4QR_wfM40vOhsQ4",Pe="TPdGbM0PhSqxmhkxP9n2",Ae="y33j8HV43EGq3BPkZrLA",Te=(0,h.memo)((e=>(0,K.jsxs)(E.Link,{to:"spotify:concerts",className:Ue,onClick:e.onClick,children:[(0,K.jsx)(Ne.Z,{children:(0,K.jsx)("div",{className:Ae,style:{backgroundImage:"linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(18, 18, 18, 0.5) 50.52%, rgba(18, 18, 18, 0.7) 100%), url(https://concerts.spotifycdn.com/ConcertHubCard.png)"}})}),(0,K.jsx)("div",{className:Pe,children:(0,K.jsx)(g.D,{as:"h2",variant:"canon",children:i.ag.get("concerts_browse_more")})})]})));var Ke=s(92332);const Fe=(0,h.memo)((e=>{const t=(0,h.useMemo)((()=>e.entitySpec.recommendedConcertsFactory()),[e.entitySpec]),s=(0,k.$P)(),n=(0,k.Wi)(t),a=e.upcomingConcerts;if(!a||a.length<1)return null;const r=a.map(((e,n)=>{const a=`spotify:concert:${e.concert.id}`;return(0,K.jsx)(Ke.Z,{concert:e.concert,onClick:()=>{const e=t.concertCardFactory({position:n,uri:a}).hitUiNavigate({destination:a});s.logInteraction(e)}},e.concert.id)}));return(0,K.jsx)("div",{className:oe,ref:n,"data-testid":"concert-recommendations",children:(0,K.jsx)(U.ZP,{value:"headered-grid",children:(0,K.jsxs)(ve.P,{title:i.ag.get("concerts_more_events"),total:a.length+1,className:de,showSeeAll:!0,seeAllUri:"spotify:concerts",seeAllLabel:i.ag.get("view.see-all"),children:[(0,K.jsx)(Te,{onClick:()=>{const e=t.browseCardFactory().hitUiNavigate({destination:"spotify:concerts"});s.logInteraction(e)}}),r]})})})}));var Ee=s(40343);const Ve=(0,h.memo)((e=>{const{data:t,isAnonymous:s,isConcertSaved:n}=e,{artists:a,albums:r,upcomingConcerts:i}=t,c=t.concert.concert,[o,l]=(0,h.useState)(!1),[d,m]=(0,h.useState)(""),{spec:C}=(0,k.fU)(x.q,{data:{identifier:c.id,uri:`spotify:concert:${c.id}`}});return(0,f.Y)(t.color),(0,K.jsxs)("section",{className:J,children:[(0,K.jsx)(p.$,{children:(0,Ee.Yl)(c)}),(0,K.jsxs)(v.gF,{backgroundImages:[{url:t.headerImageUri,width:100,height:100}],backgroundColor:t.color,children:[(0,K.jsxs)(v.sP,{children:[(0,K.jsx)(v.T0,{children:(0,K.jsx)("div",{className:H,children:(0,K.jsx)(g.D,{as:"h3",variant:"canon",className:Q,children:(0,ue.jx)((0,ue.CH)(c.date))})})}),(0,K.jsx)(v.xd,{children:(0,Ee.Yl)(c)})]}),(0,K.jsx)(y.W,{children:(0,K.jsx)("div",{className:ce,children:(0,K.jsx)(N.i,{text:(0,Ee.Yl)(c)})})})]}),(0,K.jsxs)("div",{className:G,children:[(0,K.jsx)(j.I,{backgroundColor:t.color}),(0,K.jsxs)("div",{className:X,children:[(0,K.jsx)(je,{onInterestedClick:(e,t)=>{l(e),m(t),setTimeout((()=>l(!1)),1e4)},concert:c,ticketAvailabilityTranslated:t.ticketAvailabilityTranslated,entitySpec:C,isAnonymous:s,isConcertSaved:n}),(0,K.jsx)(Le,{artists:a,albums:r,entitySpec:C}),(0,K.jsx)(Fe,{upcomingConcerts:i,entitySpec:C})]})]}),o&&(0,K.jsx)(u.A9,{colorSet:"invertedLight",className:he,children:d})]})})),Me=async e=>{const[t,s]=e.queryKey;return(await(0,l.getConcert)(o.b.getInstance(),s)).body},Re=()=>{const{concertId:e=""}=(0,r.UO)(),{data:t,isLoading:s}=(0,n.useQuery)(["concert",e],Me,{staleTime:6e5}),o=(e=>{const t=["concertInCollection",e];return(0,n.useQuery)(t,d,{keepPreviousData:!1,retry:!1})})({username:(0,a.v9)(m.n5),concertUri:`spotify:concert:${e}`}),l=o?.data||!1,{isAnonymous:h}=(0,a.v9)(m.Gg);return s?(0,K.jsx)(c.h,{hasError:!1,errorMessage:""}):t?(0,K.jsx)(Ve,{data:t,isAnonymous:h,isConcertSaved:l}):(0,K.jsx)(c.h,{hasError:!0,errorMessage:i.ag.get("concert.error.concert_not_found_title")})}}}]);
//# sourceMappingURL=xpui-routes-concert.js.map