"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7379],{94418:(e,t,l)=>{l.d(t,{l:()=>h});var r=l(59496),a=l(99302),s=l(54264),i=l(92770),o=l(46296);const n={"custom-order":i.HI,title:{column:o.Q.TITLE,order:o.k.ASC},artist:{column:o.Q.TITLE,order:o.k.SECONDARY_ASC},"added-by":{column:o.Q.ADDED_BY,order:o.k.ASC},"added-at":{column:o.Q.ADDED_AT,order:o.k.ASC},duration:{column:o.Q.DURATION,order:o.k.ASC},album:{column:o.Q.ALBUM,order:o.k.ASC},"album-or-podcast":{column:o.Q.ALBUM_OR_PODCAST,order:o.k.ASC},"album-or-show":{column:o.Q.ALBUM_OR_SHOW,order:o.k.ASC}},c={title:o.Q.TITLE,artist:o.Q.TITLE,"added-by":o.Q.ADDED_BY,"added-at":o.Q.ADDED_AT,duration:o.Q.DURATION,album:o.Q.ALBUM,"album-or-podcast":o.Q.ALBUM_OR_PODCAST,"album-or-show":o.Q.ALBUM_OR_SHOW},u={[o.k.NONE]:o.k.NONE,[o.k.ASC]:o.k.DESC,[o.k.DESC]:o.k.ASC,[o.k.SECONDARY_ASC]:o.k.SECONDARY_DESC,[o.k.SECONDARY_DESC]:o.k.SECONDARY_ASC},d={[o.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[o.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[o.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[o.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[o.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[o.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[o.Q.EVENT_DATE]:null,[o.Q.EVENT_INFO]:null,[o.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[o.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[o.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[o.Q.PLAYS]:null,[o.Q.RELEASE_DATE]:null,[o.Q.ADD]:null,[o.Q.ACTIONS]:null};var g=l(76933),m=l(85871),x=l(4637);function k(e){return!!e}const h=({columns:e,disabled:t,onSort:l,isBooklist:h=!1})=>{let y=[...e];h?y=i.i1:y.splice(2,0,g.QD.ARTIST);const{sortState:A,setSortState:C}=(0,r.useContext)(i.Gb),b=function(e){return null===e.column?d[g.QD.INDEX]:(0,m.cB)(e.column,e.order)?d[g.QD.ARTIST]:d[e.column]}(A),S=(0,r.useCallback)((e=>{l?.(),C(((e,t,l)=>e?t!==c[e]||"artist"===e&&[o.k.ASC,o.k.DESC].includes(l)||"title"===e&&[o.k.SECONDARY_ASC,o.k.SECONDARY_DESC].includes(l)?n[e]:{column:c[e],order:u[l]}:i.HI)(e,A.column,A.order))}),[l,C,A.column,A.order]),D=(0,r.useCallback)((()=>null!==A.column),[A.column]),f=y.map((e=>d[e])).filter(k);return(0,x.jsx)(s.A,{options:f,onSelect:S,selected:b,isSelectionChanged:D,sortOrder:A.order,heading:a.ag.get("drop_down.sort_by"),disabled:t})}},21896:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ee});var r=l(59496),a=l(9102),s=l(24768),i=l(94024),o=l(90980),n=l(99302),c=l(64418),u=l(31267),d=l(82289),g=l(38730),m=l(68368),x=l(90337),k=l(85871),h=l(70299),y=l(76933),A=l(92770),C=l(25672),b=l(36255),S=l(77117),D=l(94062),f=l(17246),p=l(92499),j=l(20274),E=l(71852),T=l(12749),v=l(94418);const I="uCHqQ74vvHOnctGg0X0B",Q="feuNq1FTxMbdeOTuFgpA";var P=l(4637);const _=r.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,p.fU)(E.createDesktopSearchBarEventFactory,{}),a=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),s=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),i=(0,r.useCallback)((()=>{l.logInteraction(t.sortButtonFactory().hitSort())}),[l,t]);return(0,P.jsxs)("div",{className:Q,children:[(0,P.jsx)(r.Suspense,{fallback:null,children:(0,P.jsx)(T.K,{placeholder:n.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:a,onClear:s})}),(0,P.jsx)(v.l,{columns:A.MI,onSort:i})]})}));var R=l(16786),O=l(87664),N=l(51652),U=l(25129);const B=r.memo((function({tracklistDomRef:e,togglePlay:t,isPlaying:l,isActive:a,backgroundColor:s,spec:i,logger:o}){const c=(0,U.Q)(),u=(0,r.useMemo)((()=>i.shuffleButtonContainerFactory()),[i]),d=(0,R.j)(),g=(0,r.useCallback)((()=>{const e=(0,O.aK)({isPlaying:l,isActive:a,spec:i.playButtonFactory(),logger:o,uri:b.b});t({loggingParams:e})}),[a,l,o,i,t]);return(0,P.jsx)(j.o,{backgroundColor:s,children:(0,P.jsxs)(j.F,{children:[(0,P.jsx)(x.$,{size:d,onClick:g,isPlaying:l,uri:b.b}),c&&(0,P.jsx)(p.Nh,{spec:u,children:(0,P.jsx)(N.K,{entityName:n.ag.get("local-files"),contextUri:b.b,activationPlacement:"bottomEnd",size:d})}),(0,P.jsx)(p.Nh,{spec:i,children:(0,P.jsx)(_,{tracklistDomRef:e})})]})})}));var F=l(37037),L=l(25702),M=l(65669),w=l(6721),Y=l(80320),H=l(60125),z=l(25934),W=l(65899),K=l(74335),X=l(69855);const G=r.memo((function({uri:e,uid:t,name:l,duration_ms:a,artists:s,album:i,is19PlusOnly:o,isExplicit:c,isPlayable:u,index:d,contextUri:g,imgUrl:m,usePlayContextItem:x}){const{spec:k}=(0,p.fU)(F.r,{data:{position:d,reason:"",uri:e}}),{filter:y}=(0,r.useContext)(h.fo),{isActive:A,isPlaying:C,triggerPlay:b,togglePlay:S}=x({uid:t,uri:e,index:d}),{badges:D,hasBadges:f}=(0,Y.r)({isExplicit:c}),j=s?.map((e=>e.name)).join(n.ag.getSeparator())||"";return(0,P.jsx)(w.ZP,{value:"row",index:d,children:(0,P.jsx)(L._,{menu:(0,P.jsx)(H.N,{uri:e,uid:t,contextUri:g}),children:(0,P.jsxs)(X.c,{uri:e,contextUri:g,isActive:A,index:d,onTriggerPlay:(e,t)=>{b({loggingParams:t})},ariaRowIndex:d+1,isPlayable:u,ageRestricted:o,dragMetadata:{name:l,createdBy:j},spec:k,children:[(0,P.jsx)(W.Dd,{ariaColIndex:0,children:(0,P.jsx)(W.Du,{uri:e,playAriaLabel:n.ag.get("tracklist.a11y.play",l,j),isPlaying:C,isActive:A,onClick:(e,t)=>{S({loggingParams:t})},spec:k,children:(0,P.jsx)(W.km,{children:d+1})})}),(0,P.jsxs)(W.vZ,{ariaColIndex:1,children:[(0,P.jsx)(W.lD,{src:m}),(0,P.jsxs)(W.vm,{children:[(0,P.jsx)(W.Wh,{titleText:l,children:(0,P.jsx)(z.o,{searchWords:[y],textToHighlight:l})}),f&&(0,P.jsx)(W.g3,{children:D.explicit?(0,P.jsx)(M.N,{}):null}),(0,P.jsx)(W.K9,{children:s&&(0,P.jsx)(K.o,{nonInteractive:!0,artists:s,filter:y})})]})]}),(0,P.jsx)(W.UA,{ariaColIndex:2,children:i?.name&&(0,P.jsx)(W.BM,{nonInteractive:!0,uri:i?.uri,name:i?.name,children:(0,P.jsx)(z.o,{searchWords:[y],textToHighlight:i?.name})})}),(0,P.jsxs)(W.mU,{ariaColIndex:3,children:[(0,P.jsx)(W.A$,{duration:a}),(0,P.jsx)(W.Zv,{menu:(0,P.jsx)(H.N,{uri:e,uid:t,contextUri:g}),label:n.ag.get("more.label.track",l,j),spec:k})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index));var Z=l(95543);const $=new Set(A.MI),q=r.memo((function({uri:e,tracks:t,columns:l,sortState:a,handleSort:s,usePlayContextItem:i,tracklistDomRef:o}){const c=(0,r.useRef)(null),u=(0,r.useCallback)(((t,l)=>{const r=(0,Z.X)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,P.jsx)(G,{index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:r?.url||"",usePlayContextItem:i},t.uid)}),[e,i]);return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(w.ZP,{value:"playlist-tracklist",children:(0,P.jsx)(y.Pv,{ariaLabel:n.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:$,sortState:a,onSort:s,renderRow:u,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:c,outerDomRef:o},e)})})})),V=[y.QD.INDEX,y.QD.TITLE,y.QD.ALBUM,y.QD.DURATION],J=()=>{const{filter:e}=(0,r.useContext)(h.fo),{sortState:t,setSortState:l}=(0,r.useContext)(A.Gb),y=(0,r.useContext)(S.t),j=(0,D.I)(),E=(0,C.Y)(s.Fzl),T=(0,r.useRef)(null),{spec:v}=(0,p.fU)(o.G,{data:{uri:b.b}}),Q=(0,r.useMemo)((()=>v.actionBarFactory()),[v]),_=(0,r.useMemo)((()=>v.tracklistFactory()),[v]),R=(0,p.$P)(),O=(0,r.useCallback)(((e,r)=>{l((0,k.VK)(e,t)),R.logInteraction(v.tracklistFactory().columnHeaderFactory({identifier:e,position:r||0}).hitSort())}),[l,t,R,v]),{data:N}=(0,a.useQuery)(["local-files",t,e],(()=>y.getTracks((0,k._j)(t),e)),{staleTime:0,cacheTime:3e5,keepPreviousData:!0,enabled:j}),{isActive:U,isPlaying:F,togglePlay:L,usePlayContextItem:M}=(0,f.n)({uri:b.b,pages:[{items:(N??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return N?e||N.length&&j?(0,P.jsxs)("div",{role:"presentation",className:I,children:[(0,P.jsxs)(u.gF,{backgroundColor:E,children:[(0,P.jsxs)(d.W,{children:[(0,P.jsx)(x.$,{size:"medium",onClick:()=>L(),isPlaying:F,uri:b.b}),(0,P.jsx)(g.i,{text:n.ag.get("local-files")})]}),(0,P.jsxs)(u.sP,{children:[(0,P.jsx)(u.xd,{children:n.ag.get("local-files")}),(0,P.jsx)(u.T0,{children:n.ag.get("local-files.description")})]})]}),(0,P.jsx)(B,{togglePlay:L,isPlaying:F,isActive:U,backgroundColor:E,tracklistDomRef:T,spec:Q,logger:R}),(0,P.jsx)("div",{className:"contentSpacing",children:(0,P.jsx)(p.Nh,{spec:_,children:(0,P.jsx)(q,{tracks:N,uri:b.b,columns:V,handleSort:O,sortState:t,usePlayContextItem:M,tracklistDomRef:T})})})]}):(0,P.jsx)(c.u,{linkTo:"/preferences",linkTitle:n.ag.get("local-files.empty-button"),message:n.ag.get("local-files.empty-description"),title:n.ag.get("local-files.empty-header"),children:(0,P.jsx)(i.Y,{iconSize:64,"aria-hidden":"true"})}):(0,P.jsx)(m.h,{hasError:!1,errorMessage:n.ag.get("error.request-artist-failure"),loadOffline:!0})},ee=()=>(0,P.jsx)(A.kz,{uri:"spotify:internal:local-files",children:(0,P.jsx)(h.hz,{uri:"spotify:internal:local-files",children:(0,P.jsx)(J,{})})})}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map