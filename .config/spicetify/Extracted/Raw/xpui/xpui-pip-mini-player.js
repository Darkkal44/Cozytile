"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1963],{41286:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>he,TEST_IDS:()=>ke});var n=i(59496),o=i(84875),r=i.n(o),a=i(74834),l=i(97457),c=(i(15690),i(22096),i(68229)),s=i(44858),u=i(22290),d=i(93972),m=i(75162),k=i(92499),h=i(21696),g=i(51005),C=i(93017),x=i(99302),f=i(91608),p=i(79939),j=i(4637);const b=({item:e,onClick:t})=>(0,j.jsx)(j.Fragment,{children:e.artists.map(((i,n)=>{const o=(0,C.EC)(i.uri)?.toURLPath(!0);return(0,j.jsxs)("span",{children:[n>0?x.ag.getSeparator():null,o?(0,j.jsx)(f.default,{to:o,"data-testid":`context-item-info-${e.type}`,dir:"auto",onClick:t,children:i.name}):(0,j.jsx)("span",{dir:"auto",children:i.name})]},n)}))}),v=({item:e,onClick:t})=>{const{show:i}=e,n=(0,C.EC)(i.uri)?.toURLPath(!0);return n?(0,j.jsx)(f.default,{to:n,"data-testid":"context-item-info-show",dir:"auto",onClick:t,children:i.name}):(0,j.jsx)("span",{dir:"auto",children:i.name})},y=({item:e,onClick:t})=>{const{book:i}=e,n=(0,C.EC)(i.uri)?.toURLPath(!0);return n?(0,j.jsx)(f.default,{to:n,"data-testid":"context-item-info-book",dir:"auto",onClick:t,children:i.name}):(0,j.jsx)("span",{dir:"auto",children:i.name})},R={"data-testid":"context-item-info-ad-subtitle"},S=({onClick:e,adUrl:t,adUri:i,adSubtitle:o})=>{const r=(0,n.useMemo)((()=>(0,C.EC)(i)?.toURLPath(!0)),[i]);return r?(0,j.jsx)(f.default,{to:r,...R,dir:"auto",children:o}):t?(0,j.jsx)("a",{...R,onClick:i=>{e?.(i,t)},href:t,rel:"noopener noreferrer",target:"_blank",dir:"auto",children:o}):(0,j.jsx)("span",{dir:"auto",children:o})},B=({item:e,onClick:t,adUrl:i,adBlurbUri:n,adSubtitle:o})=>(0,m.G_)(e)||(0,m.RB)(e)?(0,j.jsx)(b,{item:e,onClick:t}):(0,m.iw)(e)?(0,j.jsx)(v,{item:e,onClick:t}):(0,m.G7)(e)?(0,j.jsx)(y,{item:e,onClick:t}):(0,m.k6)(e)?(0,j.jsx)(S,{adUrl:i,adUri:n,adSubtitle:o,onClick:t}):(0,p.U)(e);const P=({item:e,children:t,onClick:i,adUrl:n})=>{const o=n??function(e){return(0,m.G_)(e)?(0,C.EC)(e.album.uri)?.toURLPath(!0):(0,m.iw)(e)||(0,m.G7)(e)||(0,m.RB)(e)?(0,C.EC)(e?.uri)?.toURLPath(!0):void((0,m.k6)(e)||(0,p._)(e))}(e);return(0,m.G_)(e)&&e.isLocal?(0,j.jsx)(j.Fragment,{children:t}):(0,m.G_)(e)||(0,m.iw)(e)||(0,m.G7)(e)||(0,m.RB)(e)?void 0===o?(0,j.jsx)(j.Fragment,{children:t}):(0,j.jsx)(f.default,{"data-testid":"context-item-link",to:o,onClick:i,children:t}):(0,m.k6)(e)?o?(0,j.jsx)("a",{"data-testid":"context-item-info-ad-title",onClick:e=>{i?.(e,o)},href:o,rel:"noopener noreferrer",target:"_blank",children:t}):(0,j.jsx)(j.Fragment,{children:t}):(0,p.U)(e)};var E=i(52767),T=i(61372),N=i(74694);const w="gXC4vnPDiiiiawwnDN6i",F="HGOZPJuKeigRY5I0vqQw",U="AZLdtyFhMa1Aqml2YhF2",_="QfiWYSeXiPwGYmKED38q",V=({item:e,onClick:t})=>{const i=(0,E.QR)(e),n=(0,m.k6)(e)?i?.title:e.name,o=(0,m.k6)(e)?i?.subtitle:e.name;return(0,j.jsxs)("div",{className:w,children:[(0,j.jsx)("div",{className:F,children:(0,j.jsx)(T.R,{title:n,children:(0,j.jsx)(g.D,{"data-testid":"context-item-info-title",as:"div",variant:"celloCanon",className:F,dir:"auto",children:(0,j.jsx)(P,{item:e,onClick:t,adUrl:i?.url,children:n})})},e.uri)}),(0,j.jsx)(N.t,{className:_,item:e}),(0,j.jsx)("div",{className:U,children:(0,j.jsx)(T.R,{title:o,children:(0,j.jsx)(g.D,{"data-testid":"context-item-info-subtitles",as:"div",variant:"mesto",className:U,semanticColor:"textSubdued",children:(0,j.jsx)(B,{item:e,onClick:t,adSubtitle:o,adBlurbUri:i?.blurbUri,adUrl:i?.url?i?.url:void 0})})},e.uri)})]})};var I=i(85830),L=i(87343),O=i(67212),D=i(69617),z=i(51470),M=i(2874),A=i(32912),G=i(65720),H=i(14849);function W(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,H.k)(e)??-1,totalContentMs:e.duration??-1}}function K(e){return Math.floor(100*e)}const q="I2v17dp_FDztHzG7CZy9",X="H5VJw6yCxUOoh88LJ42y",Q=n.memo((({item:e,spec:t,logger:i})=>{const o=e.uri,{onClickPlayPause:r,onClickLike:a,onClickSkipPrevious:l,onClickSkipNext:c,onClickRepeat:s,onClickShuffle:u,onClickVolumeButton:d,onClickVolumeBar:k,onDragVolumeBar:h}=(({uri:e,spec:t,logger:i})=>{const o=(0,n.useRef)(e);o.current=e;const r=(0,G.g)(),a=(0,n.useMemo)((()=>t.playerControlsFactory()),[t]),l=(0,n.useCallback)((e=>{let t=null;o.current&&("pause"===e?t=a.playPauseButtonFactory().hitPause({itemToBePaused:o.current}):"resume"===e&&(t=a.playPauseButtonFactory().hitResume({itemToBeResumed:o.current})),t&&i.logInteraction(t))}),[i,a]),c=(0,n.useCallback)((e=>{if(!o.current)return;const t=a.likeButtonFactory(),n=e?t.hitLike({itemToBeLiked:o.current}):t.hitRemoveLike({itemNoLongerLiked:o.current});i.logInteraction(n)}),[i,a]),s=(0,n.useCallback)((()=>{const e=r.getState();if(!e)return;const t=a.previousButtonFactory().hitSkipToPrevious(W(e));i.logInteraction(t)}),[i,r,a]),u=(0,n.useCallback)((()=>{const e=r.getState();if(!e)return;const t=a.nextButtonFactory().hitSkipToNext(W(e));i.logInteraction(t)}),[i,r,a]),d=(0,n.useCallback)((e=>{const t=a.repeatButtonFactory();let n=null;switch(e){case m.zq.REPEAT_TRACK:n=t.hitRepeatOneEnable();break;case m.zq.REPEAT_CONTEXT:n=t.hitRepeatEnable();break;case m.zq.REPEAT_NONE:n=t.hitRepeatDisable();break;default:(0,p._)(e)}n&&i.logInteraction(n)}),[i,a]),k=(0,n.useCallback)((e=>{if(!o.current)return;const t=e?"shuffle":"linear",n=e?"linear":"shuffle",r=a.shuffleButtonFactory({uri:o.current}).hitSelectShuffleMode({previousMode:n,selectedMode:t});i.logInteraction(r)}),[i,a]),h=(0,n.useCallback)((e=>{const t=a.volumeMuteButtonFactory();i.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[i,a]),g=(0,n.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.hitSetVolume({newVolumePercentage:K(e)}))}),[i,a]),C=(0,n.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.dragSetVolume({newVolumePercentage:K(e)}))}),[i,a]),x=(0,n.useCallback)((e=>{const t=a.seekBackwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]);return{onClickSeekForward:(0,n.useCallback)((e=>{const t=a.seekForwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]),onClickSeekBack:x,onClickPlayPause:l,onClickLike:c,onClickSkipPrevious:s,onClickSkipNext:u,onClickRepeat:d,onClickShuffle:k,onClickVolumeButton:h,onClickVolumeBar:g,onDragVolumeBar:C}})({uri:o,spec:t,logger:i}),g=(0,I.y1)(h,500,{leading:!1,trailing:!0});if(!o)return null;const C=(0,O.G)(e),x=(0,L.i)(e),f=function(e){if((0,L.i)(e)||(0,m.G7)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(e);return(0,j.jsxs)(j.Fragment,{children:[C&&(0,j.jsx)(z.B,{uri:o,onClick:a,className:q}),x&&(0,j.jsx)(D.w,{uri:o,onClick:a,className:q}),f?(0,j.jsx)(M.FP,{iconSize:16}):(0,j.jsx)(M.P4,{iconSize:16,onClick:u}),(0,j.jsx)(M.Wu,{iconSize:16,onClick:l}),(0,j.jsx)(M.IF,{iconSize:24,onClick:r,className:X}),(0,j.jsx)(M.C$,{iconSize:16,onClick:c}),f?(0,j.jsx)(M.Of,{iconSize:16}):(0,j.jsx)(M.$Z,{iconSize:16,onClick:s}),(0,j.jsx)(A.h,{iconSize:16,mode:A.R.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:d,onVolumeBarClick:k,onVolumeBarDrag:g})]})}));var Y=i(3893),Z=i(82091),J=i(31125),$=i(21365),ee=i(33933);var te=i(21612),ie=i(13633);function ne(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}const oe="transparent",re="ktiXGqfcVuegTncUQJim",ae="xM5DXnNVIBKl0D8KmkKr",le="xZLIxv5s2tm_tmFk3WK8",ce="X_fBDy8Kj2NkVB4npQT3",se="yMMglN43dvX2QKTUoivA",ue="D0BU1OBnl1EjBDosrWXn",de="tKfqdd6glswVG49yHgiT",me="Hbbk972I34uVuWeqBn2Q",ke={HOVER_CONTAINER:"document-pip-hover-element",COVER_ART:"document-pip-cover-art",COVER_ART_PLACEHOLDER:"document-pip-cover-art-placeholder"},he=n.memo((()=>{const{item:e,context:t}=(0,Z.x)()??{},i=640,o=(0,n.useMemo)((()=>(0,h.o)(e?.images??void 0,{desiredSize:i})),[e?.images,i]),g=(0,u.b)(o,oe),C=(0,a.W6)(Y.YZd);((e,t)=>{const i=(0,ee.Y)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),o=(0,n.useMemo)((()=>(0,h.o)(i?.images??void 0,{desiredSize:e})),[i?.images,e]);(0,u.b)(o,t)})(i,oe);const{spec:x,logger:f}=(0,k.fU)(l.O,{}),p=(0,k.Wi)(x);(({spec:e,logger:t})=>{const i=(0,ie.zY)(),o=(0,n.useRef)(null);null===o.current&&(o.current=ne(i)),(0,te.a)((()=>{const n=ne(i);null!==n&&null!==o.current&&(t.logInteraction(e.dragUiResize2d({startWidthPx:o.current.width,startHeightPx:o.current.height,endWidthPx:n.width,endHeightPx:n.height})),o.current=n)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:f,spec:x});const{setVideoPlayerUIFlag:b}=(0,J.l)(),{isPlayingRemotely:v}=(0,d.H)();if((0,n.useEffect)((()=>{C&&b($.x.documentPip,!0)}),[C,b]),!e||!t)return null;const y={"--background-color":g,"--background-image-url":`url(${o})`,"--background-image-width":"640px","--background-image-height":"640px"},R=(0,m.iw)(e)&&("video"===e.mediaType||"mixed"===e.mediaType);let S=!R;return!R||!v&&C||(S=!0),(0,j.jsxs)("div",{className:r()("encore-dark-theme",re),style:y,ref:p,children:[(0,j.jsxs)("div",{className:r()(ae,{[le]:!R}),"data-testid":"pip-hover-element",children:[(0,j.jsx)("div",{className:ce,id:"document-pip-main-container",children:S&&(0,j.jsx)(s.Ee,{className:se,src:o,loading:"eager",testid:ke.COVER_ART,children:(0,j.jsx)("div",{className:ue,children:(0,j.jsx)(c.t,{size:"xlarge",type:e.type,"data-testid":ke.COVER_ART_PLACEHOLDER})})})}),(0,j.jsx)("div",{className:r()("encore-over-media-set",de,{[me]:!(0,m.k6)(e)}),dir:"ltr",children:(0,j.jsx)(Q,{item:e,spec:x,logger:f})})]}),(0,j.jsx)(V,{item:e})]})}))}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map