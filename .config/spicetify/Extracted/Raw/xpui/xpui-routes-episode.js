"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{24662:(e,t,s)=>{s.d(t,{o:()=>n});var i=s(74834),a=s(3893);function n(){return{version:(0,i.W6)(a.GEN)?2:1}}},86454:(e,t,s)=>{s.d(t,{p:()=>u,q:()=>r.q});var i=s(59496),a=s(55411),n=s(27601),r=s(74272),o=s(69763),l=s(47570),c=s(4637);const d=i.memo((function({uri:e,size:t=r.q.md,className:s,onClick:d,showUpsell:u}){const[p,m]=(0,n.Z)(e),h=(0,a.I0)(),g=(0,l.o)(),x=(0,i.useCallback)((()=>{g({targetUri:e,intent:p?"remove-from-library":"add-to-library",type:"click"}),m(!p),h(p?(0,o.SS)():(0,o.kK)())}),[g,e,p,m,h]);return(0,c.jsx)(r.o,{className:s,isFollowing:p,onFollow:x,onClick:d,uri:e,size:t,showUpsell:u})})),u=i.memo((function(e){return(0,c.jsx)(d,{...e})}))},34742:(e,t,s)=>{s.r(t),s.d(t,{default:()=>vt});var i=s(59496),a=s(13841),n=s(74834),r=s(89890),o=s(17089),l=s(93017),c=s(99302),d=s(57014),u=s(8177),p=s(68368),m=s(7215),h=s(24662),g=s(78368),x=s(4637);const y=(0,i.lazy)((()=>s.e(6867).then(s.bind(s,6867))));function k(e){const t=(0,g.m)(),s=(0,h.o)();return t?(0,x.jsx)(i.Suspense,{fallback:!0,children:(0,x.jsx)(y,{reason:"Episode page",...s,...e})}):null}const b="dpN5ViPOceUWNB5EQPHN",j="fBEA27lLw_sc60Zjd_qw",C="vBcxPq3E2okwgXOkVPEM",P="CxoSYuAjlcCDSOWnnbJe",T="HCCBXwdFvq6omWW2hR0N",f="bJOPO5Zo7dpjSVDwEpSw",v="TXdDDpokVTyJzDEDWHHf",I="tvj001zNcrC5VUZmTt9c",S="PC5kR03GYecc7syeoC0q",E="YldGldlfaI9myEGXQf9g",U="qJHVIpJn1vLPWsAKfTEZ",D="wSIzjkVlr0Zdy7di2vRm",N="hYS_K1NATGyWt6tCSRqQ",w="hVVaM4pF9arpQ8Nvn2a1",L="zf0Eac1LugsHUacz74Zf",R="TnNaqxbaI0hzhBQZ7wE0",A="zSw1lG1TNe_xm6KTqtCv",M="MlEQDkXnjdKKJueJ9kkB",B="jg0xlyD1yjh0DPNG6eOg",F="QiHXpFb4dLZNOFe5gpp3";var O=s(51005),z=s(19393),_=s(3893),W=s(92499),$=s(76285),H=s(22840);const K=({cardHeaderText:e,cardBodyText:t,buttonText:s,buttonTarget:i})=>(0,n.W6)(_.XdP)?(0,x.jsxs)("div",{className:E,children:[(0,x.jsxs)("div",{className:U,children:[(0,x.jsx)(O.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,x.jsx)(O.D,{semanticColor:"textBase",children:t})]}),(0,x.jsx)($.D,{buttonSize:"sm",colorSet:"invertedLight",href:(0,l.EC)(i).toURLPath(!0),component:H.Z,children:s})]}):null,Z=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:a,htmlDescription:r,onExpanded:o,onTimeStampClick:l,playability:d,showHeader:u=!0,spec:p})=>{const m=(0,W.$P)(),h=(a||t)&&u,g=(0,i.useCallback)((e=>{const t=p.readMoreButtonFactory();m.logInteraction(e?t.hitUiReveal():t.hitUiHide()),o?.()}),[p,m,o]),y=(0,n.W6)(_._nP,{loadingValue:!1});return(0,x.jsxs)(x.Fragment,{children:[h&&(0,x.jsx)(O.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:T,children:c.ag.get("episode.description-title")}),t&&(0,x.jsx)(K,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),a&&(0,x.jsx)(z.o,{className:C,onTimeStampClick:l,maxLines:4,onExpanded:g,content:(s||"").trim(),htmlContent:e&&r?r:void 0,enableTimestamps:d.playable,enableAutomaticLinkification:y&&e&&!!r})]})};var V=s(84875),q=s.n(V),Y=s(78795),G=s(67946),Q=s(82861),X=s(58161),J=s(75815),ee=s(73652),te=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(te||{});const se=i.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:s,spec:a}){const n=(0,W.$P)(),[r,o]=(0,i.useState)(te.DESCRIPTION),l=(0,ee.Mi)(),{ref:d,inView:u}=(0,Y.YD)({threshold:[1],root:l.current,rootMargin:`-${J.K1+1}px 100000px 0px 100000px`}),p=(0,i.useRef)(null),m=(0,i.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,i.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const s=e-J.K1;t.scrollTop>s&&t.scrollTo({top:s})}),[l,r]),(0,x.jsx)(G.l,{list:(0,x.jsxs)(Q.F,{className:q()(M,{[B]:!u}),ref:m,children:[(0,x.jsx)(X.c,{label:c.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===te.DESCRIPTION,onClick:()=>{const e=a.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(te.DESCRIPTION)},className:q()(F,{[D]:r===te.DESCRIPTION})}),(0,x.jsx)(X.c,{label:c.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===te.TRANSCRIPT,onClick:()=>{const e=a.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(te.TRANSCRIPT)},className:q()(F,{[D]:r===te.TRANSCRIPT})})]}),children:null===e||r===te.DESCRIPTION?t:s})}));var ie=s(52717),ae=s(61674),ne=s(17246),re=s(21696);const oe=(0,i.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:s}){const{spec:i,logger:a}=(0,W.fU)(ie.m,{data:{uri:s}}),{isPlaying:n}=(0,ne.n)({uri:s},{featureIdentifier:"episode"}),r=i.timestampLinkFactory();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:w,children:(0,x.jsx)(O.D,{variant:"viola",semanticColor:"textBase",children:c.ag.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,i)=>{const o=`transcript-section-${i}`;return(0,x.jsxs)("div",{className:N,children:[(0,x.jsx)("button",{className:L,onClick:()=>{t(e.startMs,o),a.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:s}))},children:(0,x.jsx)(ae.D,{id:o,targetURI:(0,l.EC)(s),fadeOut:!0,children:(0,x.jsx)(O.D,{variant:"finaleBold",semanticColor:"textSubdued",className:R,children:(0,re.m)(e.startMs)})})}),e.content.map(((e,t)=>(0,x.jsx)(O.D,{variant:"viola",semanticColor:"textBase",className:A,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));var le=s(96819),ce=s(76933),de=s(92087),ue=s(79939),pe=s(37037),me=s(99767),he=s(65899),ge=s(69855),xe=s(19995),ye=s(41432),ke=s(6721),be=s(77579);const je="OYehkMWcGJRKPkByp46K",Ce="uc1bXkrZqrCz0CMK4lBb",Pe="qZeibBbA3SVClzEueYND",Te=({episodeUri:e,index:t,duration:s,start:a,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,xe.k)({episodeUri:e,start:a,stop:n}),g=(0,i.useCallback)(((e,t)=>{h(t)}),[h]),{spec:y}=(0,W.fU)(pe.r,{data:{position:t,reason:"",uri:o}});return(0,x.jsx)(ke.ZP,{value:"row",index:t,children:(0,x.jsx)(ye.x,{trigger:"right-click",action:"open",menu:(0,x.jsx)(me.$,{uri:o}),children:(0,x.jsxs)(ge.c,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:g,isActive:p,isPlayable:u,spec:y,children:[(0,x.jsxs)(he.vZ,{ariaColIndex:0,children:[(0,x.jsx)(he.Du,{uri:o,playAriaLabel:c.ag.get("tracklist.a11y.play",r,l?.[0].name),onClick:g,isPlaying:m,isActive:p,spec:y,children:(0,x.jsx)(he.km,{children:(0,x.jsx)("img",{className:Ce,src:d.image,alt:d.name})})}),(0,x.jsxs)(he.vm,{children:[(0,x.jsx)(he.Wh,{titleText:r,children:r}),(0,x.jsx)(he.K9,{children:(0,x.jsx)(he.T6,{artists:l,spec:y})})]})]}),(0,x.jsx)(he.UA,{ariaColIndex:1,children:(0,x.jsx)(he.BM,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,x.jsxs)(he.mU,{ariaColIndex:2,children:[(0,x.jsx)(be.f,{uri:o,spec:y}),(0,x.jsx)(he.A$,{duration:s}),(0,x.jsx)(he.Zv,{spec:y,menu:(0,x.jsx)(me.$,{uri:o,artists:l}),label:c.ag.get("more.label.track",r,l?.[0].name)})]})]})})})};function fe(e,t,s){return e.reduce(((e,i,a)=>((a>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===i.type?e.push(function(e,t,s){return{type:"MUSIC",index:t,uri:s.uri,episodeUri:e,start:s.start,stop:s.stop,duration:s.duration,name:s.track.name,artists:s.track.artists,album:s.track.album,playable:s.track.playable}}(s,a,i)):"TALK"===i.type&&e.push(function(e,t,s){return{type:"TALK",index:t,uri:e,title:s.title,subtitle:s.subtitle,start:s.start,stop:s.stop,duration:s.duration,showUri:s.show.uri,showName:s.show.name}}(s,a,i)),e)),[])}const ve=({uri:e,segmentCount:t})=>{const s=(0,de.G)(),a=(0,i.useCallback)((async(i,a)=>{const n=Math.ceil(i/2);try{return{items:fe(await s.getSegments(e,n,a),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,s,e]),n=(0,i.useCallback)((t=>{switch(t.type){case"SPACER":return(0,x.jsx)("div",{className:Pe},t.id);case"MUSIC":return(0,x.jsx)(Te,{...t},`${e}-${t.index}`);case"TALK":return(0,x.jsx)(le.t,{...t},`${e}-${t.index}`);default:return(0,ue.U)(t)}}),[e]),r=c.ag.get("music_and_talk.in_this_episode");return(0,x.jsxs)("div",{children:[(0,x.jsx)(O.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:je,children:r}),(0,x.jsx)(ce.Pv,{ariaLabel:r,hasHeaderRow:!0,rowPlaceholder:ce.hU,columns:[ce.QD.TITLE,ce.QD.ALBUM_OR_SHOW,ce.QD.DURATION],renderRow:n,fetchTracks:a,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var Ie=s(70492);const Se=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:a,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:d,playability:u,segmentCount:p,showUrl:h,transcript:g,transcriptEnabled:y,uri:b,spec:j})=>{const C=(0,W.$P)(),P=(0,i.useMemo)((()=>j.descriptionSectionFactory()),[j]),T=(0,i.useMemo)((()=>P.trackListFactory()),[P]),[v,I]=(0,i.useState)(null),S=(0,i.useCallback)((async e=>{const t=await(0,Ie.l)(e);I(t)}),[]);(0,i.useEffect)((()=>{g&&g.length>0&&S(g[0].cdnUrl)}),[S,g]);const E=i=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Z,{hasDescription:a,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:s,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:i,spec:P}),n&&(0,x.jsx)(W.Nh,{spec:T,children:(0,x.jsx)(ve,{segmentCount:p,uri:b})}),h&&(0,x.jsx)(m.P,{buttonSize:"sm",className:f,href:h,component:H.Z,onClick:()=>{C.logInteraction(P.allEpisodesLinkFactory().hitUiNavigate({destination:h}))},children:c.ag.get("episode.see_all_episodes")}),(0,x.jsx)(k,{uri:b})]});return(0,x.jsx)(x.Fragment,{children:y&&g&&g?.length>0?(0,x.jsx)(se,{transcriptSections:v,descriptionContent:E(!1),transcriptContent:(0,x.jsx)(oe,{transcriptSections:v||[],onTimeStampClick:d,episodeUri:b}),spec:j}):E(!0)})};var Ee=s(25687),Ue=s(60433),De=s(90378),Ne=s(89458);const we="activation-trigger-mme",Le=({episodeUri:e,showUri:t,isLocked:s,isPlaying:i,isPlayDisabled:a,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,Ne.E)();if((0,Ue.g)())return(0,x.jsx)(De.f,{size:c,onClick:o,isPlaying:i,disabled:a,locked:s,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,x.jsx)(Ee.l,{showUri:t,enabled:s,renderInline:!1,children:(0,x.jsx)(De.f,{size:c,onClick:o,isPlaying:i,disabled:a,locked:s,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,x.jsx)(ae.D,{id:we,targetURI:(0,l.EC)(e),fadeOut:!0,children:u}):u};var Re=s(47570),Ae=s(23828),Me=s(84933),Be=s(65720),Fe=s(34703),Oe=s(33933),ze=s(69995),_e=s(66597),We=s(27445),$e=s(54067),He=s(55993),Ke=s(55411),Ze=s(83354),Ve=s(20274),qe=s(86454),Ye=s(67866),Ge=s(69617),Qe=s(49502),Xe=s(87664),Je=s(80101),et=s(90191),tt=s(57528),st=s(51001),it=s(80320),at=s(16786),nt=s(7657);const rt=({episode:e,onPlayEpisode:t,isPlaying:s,isActive:a,isFullyPlayed:r,setIsFullyPlayed:o,backgroundColor:l,isLocked:d,spec:u})=>{const{uri:p,playedState:m,contentRating:h,playability:g}=e,y=(0,W.$P)(),k=(0,Ke.I0)(),[b]=(0,tt.z)(1e4,(e=>e?.item?.uri===p)),j=(0,Oe.Y)((e=>e?.duration)),{badges:C}=(0,it.r)({contentRating:h?.label}),P=(0,i.useCallback)((e=>{!g.playable&&C.nineteen&&(e.stopPropagation(),k((0,Ze.RM)(p||"")))}),[p,g.playable,C.nineteen,k]),T=(0,i.useCallback)((()=>{const e=u.contextMenuButtonFactory().hitUiReveal();y.logInteraction(e)}),[y,u]),f=(0,i.useCallback)(((e,t)=>{(0,Xe.l7)(t,u.downloadButtonFactory(),y,p)}),[y,u,p]),I=(0,i.useCallback)((e=>{const t=u.saveButtonFactory();y.logInteraction(e?t.hitLike({itemToBeLiked:p}):t.hitRemoveLike({itemNoLongerLiked:p}))}),[y,u,p]),S=!d&&!e.playability.playable,E=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),U=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),D=e.podcast?.uri,N=(0,at.j)(),w=(0,n.W6)(_.CEI,{loadingValue:!1});return(0,x.jsxs)(Ve.o,{backgroundColor:l,children:[(0,x.jsxs)(Ve.F,{children:[C.nineteen&&(0,x.jsx)(et.X,{className:v,size:16}),(0,x.jsx)(st.E,{size:st.$.LARGE,fullyPlayed:r,durationMs:a&&j?j:e.duration.milliseconds,releaseDate:It(e.releaseDate?.isoString),resumePositionMs:m.playPositionMilliseconds,isPlaying:s,position:a&&b||void 0})]}),(0,x.jsxs)(Ve.F,{children:[(0,x.jsx)("div",{onClick:P,children:(0,x.jsx)(Le,{episodeUri:e.uri,showUri:D,isLocked:d,onClick:()=>{t(m.playPositionMilliseconds)},isPlaying:s,isPlayDisabled:S,playButtonPlayLabel:E,playButtonPauseLabel:U,size:N})}),!d&&(0,x.jsx)(qe.p,{uri:e.uri,onClick:f,size:N}),w?(0,x.jsx)(nt.T,{uri:e.uri,size:N}):(0,x.jsx)(Ge.w,{uri:e.uri,size:N,onClick:I}),(0,x.jsx)(Je.y,{onShow:T,menu:(0,x.jsx)(Qe.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:D,contextUri:e.uri,isPlayed:r,onMarkAsPlayed:o}),children:(0,x.jsx)(Ye.MoreButton,{label:c.ag.get("more.label.context",e.name),size:N})})]})]})};var ot=s(31267),lt=s(9502),ct=s(82289),dt=s(38730),ut=s(7071),pt=s(50943),mt=s(91608),ht=s(25702),gt=s(46356),xt=s(70657),yt=s(64283),kt=s(26960);const bt=({coverArt:e,name:t})=>{const s=(0,xt.jh)(),i=s===xt.Uo.SMALL||s===xt.Uo.XSMALL;return(0,x.jsx)(yt.O,{images:e,type:He.p.EPISODE,shape:yt.K.ROUNDED_CORNERS,title:t,size:i?kt.m$.SIZE_20:kt.m$.SIZE_24,className:I})};const jt=({episode:e,isFullyPlayed:t,setIsFullyPlayed:s,backgroundColor:a,spec:r})=>{const{uri:o,name:d,sharingInfo:u,playedState:p,episodeType:m,releaseDate:h,coverArt:g}=e,y=(0,W.$P)(),k=function(e,t,s,i,a){const n=t===$e.Wf.Episode;return(0,gt.G3)(e,i,s,a)?(0,x.jsx)(gt.Fg,{isMusicAndTalk:n}):n?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(o,m||$e.Wf.Unknown,p.playPositionMilliseconds,It(h?.isoString),p.state===$e.sY.Completed),b=e.podcast?.uri,C=function(e){const t=(0,l.EC)(e);return`/show/${(0,l.HB)(t?.id||"")}`}(b),T=(0,i.useCallback)((()=>{y.logInteraction(r.podcastLinkFactory().hitUiNavigate({destination:C}))}),[y,C,r]),f=(0,n.W6)(_.vyX,{loadingValue:!1}),v=e.podcast?.coverArt,I=!(v&&v.length===g.length&&g.every(((e,t)=>e.url===v[t].url))),E=f&&!I,U=(0,xt.jh)();return(0,x.jsxs)(ot.gF,{backgroundColor:a,children:[(0,x.jsx)(ct.W,{children:(0,x.jsx)(dt.i,{text:d,dragUri:o,dragLabel:d})}),!E&&(0,x.jsx)(lt.k,{children:(0,x.jsx)(ht._,{menu:(0,x.jsx)(Qe.k,{uri:o,sharingInfo:u,showUri:b,contextUri:o,isPlayed:t,onMarkAsPlayed:s}),children:(0,x.jsx)(ot.Oe,{loading:"eager",name:d,images:g,placeholderType:"episode",shape:f?ot.Kc.SQUARE:ot.Kc.ROUNDED_CORNERS})})}),(0,x.jsxs)(ot.sP,{children:[(0,x.jsx)(ut.g,{children:k}),(0,x.jsx)(ht._,{menu:(0,x.jsx)(Qe.k,{uri:o,sharingInfo:u,showUri:b,contextUri:o,isPlayed:t,onMarkAsPlayed:s}),children:(0,x.jsx)(ot.xd,{dragUri:o,dragLabel:d,scaleAtMinWidth:ot.vz,className:q()({[j]:f}),children:(0,x.jsx)("span",{"data-testid":"episodeTitle",children:d})})}),(0,x.jsx)(ht._,{menu:(0,x.jsx)(Qe.k,{uri:o,sharingInfo:u,showUri:b,contextUri:o,isPlayed:t,onMarkAsPlayed:s}),children:(0,x.jsxs)(mt.default,{to:C,onClick:T,className:S,children:[E&&(0,x.jsx)(bt,{name:d,coverArt:g}),(0,x.jsx)(pt.m,{className:U===xt.Uo.SMALL&&E?"":P,children:(0,x.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var Ct=s(72484),Pt=s(62412),Tt=s(79095);const ft=({episode:e})=>{const{uri:t,episodeType:s,description:a,htmlDescription:o,podcastSubscription:c,segmentsCount:p,podcast:m,contentInformation:h,playedState:g,coverArt:y}=e,{spec:k,logger:j}=(0,W.fU)(r.J,{data:{uri:t}}),C=(0,Ct.k)(),P=(0,i.useMemo)((()=>k.headerFactory()),[k]),T=(0,i.useMemo)((()=>k.actionBarFactory()),[k]),[f,v]=(0,i.useState)(g.state===$e.sY.Completed),I=(0,Be.g)(),S=(0,Re.o)(),E=void 0!==p&&p>0,U=(0,n.W6)(_.WE4,{loadingValue:!1}),D=(0,Ue.g)(),{triggerPlay:N,togglePlay:w,isPlaying:L,isActive:R}=(0,ne.n)({uri:t,...C?{}:{pages:[{items:[{type:He.p.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:A}=(0,Fe.$o)(t),M=y[0].url,B=(0,Me.Zj)(M||null),F=(0,Oe.Y)((e=>e?.isPaused??void 0)),O=(0,Ne.E)(),z=c.isPaywalled&&!c.isUserSubscribed,$=A||R,H=e?{name:e.name,uri:e.uri,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,K=m?{name:m.name,uri:m.uri,trailer:m.trailer,showTypes:m.showTypes}:null,Z=(0,Ae.s)(H,K),V=(0,i.useCallback)(((e,i,a,n)=>{const r=()=>{F?(n?.("resume"),I.resume()):(n?.("pause"),I.pause())};if(z)return;let o="play";if(!L||0!==e&&i||(o="pause"),S({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),s===$e.Wf.Episode&&O)u.y.set((()=>({triggerId:a||we,triggerAction:null})));else if(R&&!i)D?r():w({loggingParams:n?.()});else if(A&&!i)r();else{const t=n?.("play");D?Z({seekTo:e,loggingParams:t}):N({seekTo:e,loggingParams:t})}}),[z,L,S,t,s,O,A,R,D,F,I,w,Z,N]),q=(0,i.useCallback)((e=>{V(e,!1,void 0,(e=>{const s=k.actionBarFactory().playButtonFactory();let i;return i="pause"===e||L?s.hitPause({itemToBePaused:t}):"resume"===e||$?s.hitResume({itemToBeResumed:t}):s.hitPlay({itemToBePlayed:t}),j.logInteraction(i)}))}),[V,$,L,j,k,t]),Y=(0,i.useCallback)((e=>{V(e,!0,void 0,(()=>j.logInteraction(k.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[V,j,k,t]),G=(0,i.useCallback)(((e,t)=>{V(e,!0,t)}),[V]),Q=(0,i.useCallback)((()=>{S({intent:"expand-description",type:"click"})}),[S]);(0,i.useEffect)((()=>{if(e&&!$){const t=new URLSearchParams(location.search);if(t.has("t")){const s=t.get("t")||"0",i=1e3*parseInt(s,10);i<=e.duration.milliseconds&&V(i,!0)}}}),[e,$]);const X=!!a||!!o,J=e.podcast?.uri,ee=(0,l.EC)(J)?.toURLPath(!0);return(0,x.jsxs)("section",{"data-testid":"episode",className:b,children:[(0,x.jsx)(d.$,{children:(0,We.mK)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,x.jsx)(jt,{episode:e,isFullyPlayed:f,setIsFullyPlayed:v,backgroundColor:B,spec:P}),(0,x.jsx)(rt,{episode:e,onPlayEpisode:q,isPlaying:L,isActive:$,isFullyPlayed:f,setIsFullyPlayed:v,backgroundColor:B,isLocked:z,spec:T}),(0,x.jsx)("div",{className:"contentSpacing",children:(0,x.jsx)(Se,{transcriptEnabled:U,transcript:e.transcript,hasDescription:X,contentInformation:h,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:G,onExpanded:Q,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:E,segmentCount:p,uri:e.uri,showUrl:ee,spec:k})})]})},vt=i.memo((function(){const{episodeId:e=""}=(0,a.UO)(),t=(0,l.YD)(e).toURI(),s=(0,ze.I)(t);return s?.isError||!s?.episodeOrChapter?(0,x.jsx)(p.h,{hasError:s?.isError||!1,errorMessage:c.ag.get("error.not_found.title.podcast")}):(0,_e.Ey)(s.episodeOrChapter)?(0,x.jsx)(Pt.InstrumentedRedirect,{to:(0,l.EC)(s.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,x.jsx)(i.Suspense,{fallback:null,children:(0,x.jsx)(Tt.C,{pageId:o.Wg.PODCAST_EPISODE,uri:t,children:(0,x.jsx)(ft,{episode:s.episodeOrChapter})})})}));function It(e){return e?.replace(/T.*/,"")||""}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map