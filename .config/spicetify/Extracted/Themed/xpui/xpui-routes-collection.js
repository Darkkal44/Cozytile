"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[6309],{89006:(e,t,s)=>{s.d(t,{n:()=>N});var a=s(59496),n=s(84875),r=s.n(n),i=s(13841),l=s(51005),o=s(7941),c=s(91120),u=s(99302),d=s(85830),m=s(73652),g=s(90144);var p=s(41432),h=s(66097),x=s(10219);const f="main-topBar-contentArea",j="queue-tabBar-headerIsCentered",b="queue-tabBar-headerItem",y="queue-tabBar-moreButton",C="queue-tabBar-moreButtonActive",k="yxf_6IsQEmHjijEBUMTP",v="queue-tabBar-active",I="queue-tabBar-headerItemLink",S="queue-tabBar-header",A="queue-tabBar-chevron";var L=s(4637);const w=({items:e,activeItemId:t})=>(0,L.jsx)(h.v,{children:e.map((e=>e.disabled?(0,L.jsx)(x.s,{disabled:!0,role:"menuitemradio",className:k,onClick:e.handleClick,children:e.title},e.uri):(0,L.jsx)(x.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===t,className:({isActive:e})=>r()(k,{[v]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var R=s(96033);const N=(0,a.memo)((function({isCentered:e,links:t,landmarkLabel:s,className:n}){const h=(0,a.useRef)(null),[x,k]=(0,a.useState)([]),[N,O]=(0,a.useState)(0),[E,P]=(0,a.useState)([]),B=function(){const[e,t]=(0,a.useState)(window.innerWidth),{scrollNodeChildRef:s}=(0,a.useContext)(m.VX),n=(0,d.y1)((e=>{e?.width&&t(e.width)}),250);return(0,g.y)({refOrElement:s,observeOnly:"width",onResize:n}),e}()??1/0,{pathname:F}=(0,i.TH)(),T=t.find((e=>e.to===F));return(0,a.useEffect)((()=>{h.current&&O(h.current.clientWidth)}),[B]),(0,a.useEffect)((()=>{if(!h.current)return;const e=Array.from(h.current.children).map((e=>e.clientWidth));k(e)}),[t]),(0,a.useEffect)((()=>{if(!h.current)return;if(x.slice(0,-1).reduce(((e,t)=>e+t),0)<=N)return void P([]);const e=x.reduce(((e,t)=>e>t?e:t),0),t=[];let s=e;x.forEach(((e,a)=>{N>=s+e?s+=e:t.push(a)})),P(t)}),[N,x]),(0,L.jsx)("nav",{className:r()(n,f),"aria-label":s,children:(0,L.jsxs)("ul",{className:e?j:S,ref:h,children:[t.filter(((e,t)=>!E.includes(t))).map((e=>{const t=e?.render??(e=>e);return(0,L.jsx)(a.Fragment,{children:t((0,L.jsx)("li",{className:b,children:e.disabled?(0,L.jsx)("div",{className:I,children:(0,L.jsx)(l.D,{variant:"mestoBold",children:e.title})}):(0,L.jsx)(R.O,{end:!0,className:({isActive:e})=>r()(I,{[v]:e}),to:e.to,onClick:e.handleClick,children:(0,L.jsx)(l.D,{variant:"mestoBold",children:e.title})})}))},e.to)})),E.length||0===x.length?(0,L.jsx)("li",{className:b,children:(0,L.jsx)(p.x,{renderInline:!0,menu:(0,L.jsx)(w,{items:t.filter(((e,t)=>E.includes(t))),activeItemId:T?.itemId}),children:(e,t,s)=>(0,L.jsxs)("button",{className:r()(y,{[C]:T}),type:"button",onClick:t,ref:s,children:[(0,L.jsx)(l.D,{variant:"mestoBold",children:T?T.title:u.ag.get("more")}),e?(0,L.jsx)(o.U,{iconSize:16,className:A,"aria-hidden":"true"}):(0,L.jsx)(c.i,{iconSize:16,className:A,"aria-hidden":"true"})]})})}):null]})})}))},31369:(e,t,s)=>{s.d(t,{h:()=>g});var a=s(59496),n=s(71852),r=s(12749),i=s(92499),l=s(54264),o=s(43817),c=s(12614),u=s(4637);const d=a.memo((function({sortOptions:e,onSort:t}){const{sortState:s,setSortState:n}=(0,a.useContext)(o.Q),r=(0,a.useCallback)((e=>{const s=c.ei[e];t?.(s),n(s)}),[t,n]),i=e.map((e=>c.MY[e])),d=c.MY[s];return(0,u.jsx)(l.A,{options:i,onSelect:r,selected:d})})),m="collection-searchBar-searchBar",g=a.memo((function({canSort:e,canFilter:t,filterPlaceholder:s,sortOptions:l}){const{spec:o,logger:c}=(0,i.fU)(n.createDesktopSearchBarEventFactory,{}),g=(0,a.useCallback)((()=>{c.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[c,o]),p=(0,a.useCallback)((()=>{c.logInteraction(o.filterFieldFactory().hitClearFilter())}),[c,o]),h=(0,a.useCallback)((()=>{c.logInteraction(o.sortButtonFactory().hitSort())}),[c,o]);return(0,u.jsxs)("div",{className:m,children:[t?(0,u.jsx)(a.Suspense,{fallback:null,children:(0,u.jsx)(r.K,{placeholder:s,onFilter:g,onClear:p})}):null,e?(0,u.jsx)(d,{sortOptions:l,onSort:h}):null]})}))},36059:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Je});var a=s(59496),n=s(55411),r=s(13841),i=s(74834),l=s(17089),o=s(99302),c=s(57014),u=s(35941),d=s(3893),m=s(46464),g=s(51005),p=s(41742),h=s(13234),x=s(84875),f=s.n(x),j=s(60086),b=s(73652),y=s(41488),C=s(38751),k=s(75792),v=s(4637);const I=(0,a.memo)((function({index:e}){return(0,v.jsx)(C.C,{index:e,headerText:"",uri:"",renderCardImage:()=>(0,v.jsx)(k.x,{images:[]}),featureIdentifier:"unknown"})})),S="lA3jnNwnLc3CoYKT06Vz";function A({renderCard:e,nrCards:t,fetchData:s,limit:n=50,cardGridApiRef:r}){const i=(0,b.Mi)(),{getItems:l,nrValidItems:o,invalidateCache:c,hasItems:u}=(0,y.Q)({nrItems:t,fetch:s,limit:n});(0,a.useImperativeHandle)(r,(()=>({update:()=>c()})));return(0,v.jsx)("div",{className:f()({[S]:!u}),children:(0,v.jsx)(j.u,{renderItems:(t,s,a)=>l(t,s).map(((s,n)=>(s?e(s,t+n,a):null)??(0,v.jsx)(I,{index:n},t+n))),scrollNodeRef:i,nrItems:o,estimatedItemMaxHeight:250})})}var L=s(64418),w=s(68368),R=s(70299),N=s(68229),O=s(6721),E=s(80727),P=s(92499),B=s(79086),F=s(84020);const T={offset:0,limit:1},D=()=>{const e=(0,a.useContext)(E.H);return(e=>{const[t,s]=(0,a.useState)(null),n=(0,a.useCallback)((async()=>{if(!e)return;const t=await e();s(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&n()}),[t,n]),{total:t}})((0,a.useCallback)((()=>e?e?.getShows(T):Promise.resolve({totalLength:0})),[e]))},U=()=>{const e=(0,a.useContext)(E.H),[t,s]=(0,a.useState)(null),n=(0,a.useCallback)((async()=>{if(!e)return;const t=await(e?.getBooks(T));s(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&n()}),[t,n]),(0,F.b)(B.EW.UPDATE,n),{total:t}};var Y=s(31369),_=s(95482),M=s(88811),W=s(58992);const Z=a.memo((function({nrAlbums:e}){const t=(0,a.useContext)(E.H),{filter:s}=(0,a.useContext)(R.fo),{sortState:n}=(0,a.useContext)(_.Q),r=(0,a.useRef)(null),{spec:i,UBIFragment:c}=(0,P.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:albums",identifier:l.Wg.YOURLIBRARY_ALBUMS}}),u=(0,a.useMemo)((()=>i.headerFactory()),[i]),d=(0,a.useCallback)((async(e,a)=>{const r=await t.getAlbums({offset:e,limit:a,filter:s,sort:(0,M.Aq)(n)});return{items:r.items,totalLength:r.totalLength}}),[t,s,n]),m=(0,a.useCallback)(((e,t)=>(0,v.jsx)(O.ZP,{value:"card",index:t,children:(0,v.jsx)(h.r,{index:t,uri:e.uri,name:e.name,images:e.images,artists:e.artists,sharingInfo:e.sharingInfo})},e.uri)),[]);return(0,v.jsxs)(c,{spec:i,children:[(0,v.jsx)(c,{spec:u,children:(0,v.jsxs)("div",{className:W.Z.header,children:[(0,v.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("albums")}),(0,v.jsx)(a.Suspense,{fallback:null,children:(0,v.jsx)(Y.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.albums"),sortOptions:M.Ru})})]})}),(0,v.jsx)(A,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:r})]})})),H=a.memo((function(){const{total:e}=(()=>{const e=(0,a.useContext)(E.H),[t,s]=(0,a.useState)(null),n=(0,a.useCallback)((async()=>{if(!e)return;const t=await(e?.getAlbums(T));s(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&n()}),[t,n]),(0,F.b)(B.EW.UPDATE,n),{total:t}})();return null===e?(0,v.jsx)(w.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?(0,v.jsx)(Z,{nrAlbums:e}):(0,v.jsx)(L.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.albums-cta"),message:o.ag.get("collection.empty-page.albums-subtitle"),title:o.ag.get("collection.empty-page.albums-title"),children:(0,v.jsx)(N.t,{type:"album"})})})),G=a.memo((function(){return(0,v.jsx)(_.$,{uri:"collection/albums",defaultSortOption:M.aY,children:(0,v.jsx)(R.hz,{uri:"collection/albums",children:(0,v.jsx)(H,{})})})}));var K=s(20016);const V=a.memo((function({nrArtists:e}){const t=(0,a.useContext)(E.H),{filter:s}=(0,a.useContext)(R.fo),{sortState:n}=(0,a.useContext)(_.Q),r=(0,a.useRef)(null),{spec:i,UBIFragment:c}=(0,P.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:artists",identifier:l.Wg.YOURLIBRARY_ARTISTS}}),u=(0,a.useMemo)((()=>i.headerFactory()),[i]),d=(0,a.useCallback)((async(e,a)=>{const r=await t.getArtists({offset:e,limit:a,filter:s,sort:(0,M.e3)(n)});return{items:r.items,totalLength:r.totalLength}}),[t,s,n]),m=(0,a.useCallback)(((e,t)=>(0,v.jsx)(O.ZP,{value:"card",index:t,children:(0,v.jsx)(K.I,{index:t,name:e.name,uri:e.uri,images:e.images})},e.uri)),[]);return(0,a.useEffect)((()=>{r.current&&r.current.update()}),[n,s,e]),(0,v.jsxs)(c,{spec:i,children:[(0,v.jsx)(c,{spec:u,children:(0,v.jsxs)("div",{className:W.Z.header,children:[(0,v.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("artists")}),(0,v.jsx)(a.Suspense,{fallback:null,children:(0,v.jsx)(Y.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.artists"),sortOptions:M.o$})})]})}),(0,v.jsx)(A,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:r})]})})),z=a.memo((function(){const{total:e}=(()=>{const e=(0,a.useContext)(E.H),[t,s]=(0,a.useState)(null),n=(0,a.useCallback)((async()=>{if(!e)return;const t=await(e?.getArtists(T));s(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&n()}),[t,n]),(0,F.b)(B.EW.UPDATE,n),{total:t}})();return null===e?(0,v.jsx)(w.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-artists-failure")}):e>0?(0,v.jsx)(V,{nrArtists:e}):(0,v.jsx)(L.u,{message:o.ag.get("collection.empty-page.artists-subtitle"),title:o.ag.get("collection.empty-page.artists-title"),linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.artists-cta"),children:(0,v.jsx)(N.t,{type:"artist"})})})),Q=a.memo((function(){return(0,v.jsx)(_.$,{uri:"collection/artists",defaultSortOption:M.u3,children:(0,v.jsx)(R.hz,{uri:"collection/artists",children:(0,v.jsx)(z,{})})})}));var q=s(37770);const J=a.memo((function({nrBooks:e}){const t=(0,a.useContext)(E.H),{filter:s}=(0,a.useContext)(R.fo),{sortState:n}=(0,a.useContext)(_.Q),{spec:r,UBIFragment:i}=(0,P.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:audiobooks",identifier:l.Wg.YOURLIBRARY_AUDIOBOOKS}}),c=(0,a.useMemo)((()=>r.headerFactory()),[r]),u=(0,a.useRef)(null),d=(0,a.useCallback)((async(e,a)=>{const r=await t.getBooks({offset:e,limit:a,filter:s,sort:(0,M.G5)(n)});return{items:r.items.map((e=>(e=>""===e.authorName&&""===e.name)(e)?null:e)),totalLength:r.totalLength}}),[t,s,n]),m=(0,a.useCallback)(((e,t)=>(0,v.jsx)(O.ZP,{value:"card",index:t,children:(0,v.jsx)(q.c,{index:t,uri:e.uri,name:e.name,images:e.images,authorName:e.authorName,isLocked:e.isLocked})},e.uri)),[]);return(0,v.jsxs)(i,{spec:r,children:[(0,v.jsx)(i,{spec:c,children:(0,v.jsxs)("div",{className:W.Z.header,children:[(0,v.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("search.title.audiobooks")}),(0,v.jsx)(Y.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:"Search in Audiobooks",sortOptions:M.ZP})]})}),(0,v.jsx)(A,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:u})]})})),$=a.memo((function(){const{total:e}=U();return null===e?(0,v.jsx)(w.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e>0?(0,v.jsx)(J,{nrBooks:e}):(0,v.jsx)(L.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.books-cta"),message:o.ag.get("collection.empty-page.books-subtitle"),title:o.ag.get("collection.empty-page.books-title"),children:(0,v.jsx)(N.t,{type:"book"})})})),X=a.memo((function(){return(0,v.jsx)(_.$,{uri:"collection/books",defaultSortOption:M.JV,children:(0,v.jsx)(R.hz,{uri:"collection/books",children:(0,v.jsx)($,{})})})}));var ee=s(75906),te=s(68286),se=s(92103),ae=s(36364),ne=s(3100),re=s(49323),ie=s(37787),le=s(31234),oe=s(21066),ce=s(94062),ue=s(28068),de=s(55993),me=s(79939),ge=s(59418),pe=s(52797),he=s(47233);const xe="collection-collectionEntityHeroCard-likedSongs",fe="collection-collectionEntityHeroCard-container",je="collection-collectionEntityHeroCard-yourEpisodes",be="collection-collectionEntityHeroCard-headerContainer",ye="collection-collectionEntityHeroCard-tracksContainer",Ce="collection-collectionEntityHeroCard-skeletonRow",ke="collection-collectionEntityHeroCard-descriptionContainer",ve="collection-collectionEntityHeroCard-opacityText";function Ie(e,t){return Array.from(new Array(e).keys()).map((e=>(0,v.jsx)(he.C,{as:"div",className:Ce,charCount:t,isLoading:!0},e)))}const Se=({index:e,onClick:t})=>{const s=(0,pe.MY)({limit:7}),{user:a}=(0,n.v9)(le.Gg),r=(0,ie.I2)(a?.id);return r?(0,v.jsx)(ge.Z,{index:e,className:f()(xe,fe),onClick:t,headerText:r.name,featureIdentifier:"your_library",uri:r.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",r.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",r.name),renderCardImage:()=>{return(0,v.jsx)("div",{className:be,children:(0,v.jsx)("div",{className:ye,children:s?(e=s,e.items.map((({uri:e,name:t,artists:[s]},a)=>(0,v.jsxs)("span",{children:[(0,v.jsx)("span",{className:ve,children:a?" • ":""}),(0,v.jsx)("span",{dir:"auto",children:s.name}),(0,v.jsx)("span",{dir:"auto",className:ve,children:t})]},e)))):Ie(3)})});var e},renderSubHeaderContent:()=>(0,v.jsx)("div",{className:ke,children:s?`${s.totalLength} ${r.name}`:Ie(1,r.name.length)})}):null},Ae=(e,t,s)=>(0,v.jsx)(O.ZP,{value:"card",index:t,children:s},`${e.uri}`??0),Le=(e,t,s)=>{switch(e.type){case de.p.LIKED_SONGS:return Ae(e,t,s>1?(0,v.jsx)(Se,{index:t},e.uri):(0,v.jsx)(te.p,{index:t},e.uri));case de.p.YOUR_EPISODES:return Ae(e,t,(0,v.jsx)(ne.T,{index:t},e.uri));case de.p.LOCAL_FILES:return Ae(e,t,(0,v.jsx)(se.P,{index:t},e.uri));case de.p.PLAYLIST:return Ae(e,t,(0,v.jsx)(ee.Z,{index:t,name:e.name,uri:e.uri,images:e.images,description:e.description,authorName:e.owner?.displayName,isPlayable:e.totalLength>0},e.uri));case"placeholder":return Ae(e,t,(0,v.jsx)(ee.Z,{index:t,uri:e.uri,name:"",images:[],description:"",authorName:""},e.uri));case"empty":return(0,v.jsx)(a.Fragment,{},t);case"folder":return null;default:return(0,me._)(e),null}},we=a.memo((function({nrPlaylists:e,showYourEpisodesCard:t,showLocalFilesCard:s}){const{filter:r}=(0,a.useContext)(R.fo),{sortState:i}=(0,a.useContext)(_.Q),c=(0,a.useContext)(ue.BS),u=(0,a.useRef)(null),d=(0,n.v9)(le.Gg).user,{spec:m,UBIFragment:h}=(0,P.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:playlists",identifier:l.Wg.YOURLIBRARY_PLAYLISTS}}),x=(0,a.useMemo)((()=>m.headerFactory()),[m]),f=(0,a.useMemo)((()=>{const e=[];if(r)return e;const a=(0,ie.I2)(d?.id);a&&(e.push(a),e.push({uri:"",type:"empty"}));const n=t?(0,ie.bl)(d?.id):null;n&&e.push(n);const i=s?(0,ie.gB)():null;return i&&e.push(i),e}),[r,s,t,d]),j=(0,a.useCallback)((()=>{u?.current&&u.current.update()}),[u]);(0,ue.iu)(j);const b=(0,a.useCallback)((async(e,t)=>{const s=f.slice(e),a=e-(f.length-s.length),n=await c.getContents({offset:a,limit:t,filter:r,sort:(0,M.pT)(i),flatten:!0,decorateImagesAndOwner:!0}),l=n.items.map((e=>"placeholder"===e.type?null:e));return{items:[...s,...l],totalLength:n.totalItemCount+f.length}}),[f,c,r,i]);return(0,v.jsxs)(h,{spec:m,children:[(0,v.jsx)(h,{spec:x,children:(0,v.jsxs)("div",{className:W.Z.header,children:[(0,v.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("playlists")}),(0,v.jsx)(a.Suspense,{fallback:null,children:(0,v.jsx)(Y.h,{canSort:c.getCapabilities().canSort,canFilter:c.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.playlists"),sortOptions:M.w0})})]})}),(0,v.jsx)(A,{nrCards:e+f.length,renderCard:Le,fetchData:b,cardGridApiRef:u})]})})),Re=a.memo((function(){const e=(0,ue.Rt)(),t=(0,ae.x)(),s=(0,oe.u)(),{createPlaylist:n}=(0,re.K)(),r=(0,ce.I)(),i=(0,a.useCallback)((()=>{n()}),[n]);return null===e||null===t?(0,v.jsx)(w.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?.playlistCount?(0,v.jsx)(we,{nrPlaylists:e.playlistCount,showYourEpisodesCard:t.totalLength>0,showLocalFilesCard:s.canFetchAllTracks&&r}):(0,v.jsx)(L.u,{linkTitle:o.ag.get("collection.empty-page.playlists-cta"),onClick:i,title:o.ag.get("collection.empty-page.playlists-title"),message:o.ag.get("collection.empty-page.playlists-subtitle"),children:(0,v.jsx)(N.t,{type:"playlist"})})})),Ne=a.memo((function(){return(0,v.jsx)(_.$,{uri:"collection/playlists",defaultSortOption:M.Bf,children:(0,v.jsx)(R.hz,{uri:"collection/playlists",children:(0,v.jsx)(Re,{})})})}));var Oe=s(8148),Ee=s(47526),Pe=s(76907),Be=s(48562),Fe=s(54745);const Te=()=>{const e="ginger-audio-shows-top-20-web",{view:t}=(0,Ee.P)(e);if(!t)return null;const{content:s,name:a}=t,{total:n=0,items:r}=s;return(0,v.jsx)(Fe.P,{title:a,total:n,seeAllUri:(0,Pe.p)(e),children:r.filter((e=>"show"===e.type)).map(((e,t)=>(0,v.jsx)(Oe._,{name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,mediaType:{audio:Be.E.AUDIO,video:Be.E.VIDEO,mixed:Be.E.MIXED}[e.media_type]??Be.E.AUDIO,sharingInfo:null,index:t},e.uri)))})};var De=s(18384),Ue=s(78729),Ye=s(75970);function _e(e,t){return Array.from(new Array(e).keys()).map((e=>(0,v.jsx)(he.C,{as:"div",className:Ce,charCount:t,isLoading:!0},e)))}const Me=({index:e})=>{const t=(0,pe.j$)({limit:7}),{user:s}=(0,n.v9)(le.Gg),a=(0,ie.bl)(s?.id);return a?(0,v.jsx)(ge.Z,{index:e,className:f()(xe,je),headerText:a.name,featureIdentifier:"your_library",uri:a.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",a.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",a.name),renderCardImage:()=>{return(0,v.jsx)("div",{className:be,children:(0,v.jsx)("div",{className:ye,children:t?(e=t,e.items.map((({uri:e,name:t,show:s},a)=>(0,v.jsxs)("span",{children:[(0,v.jsx)("span",{className:ve,children:a?" • ":""}),(0,v.jsx)("span",{dir:"auto",children:t}),s&&(0,v.jsx)("span",{dir:"auto",className:ve,children:s.name})]},e)))):_e(3)})});var e},renderSubHeaderContent:()=>(0,v.jsx)("div",{className:ke,children:t?o.ag.get("tracklist-header.episodes-counter",t.totalLength):_e(1,a.name.length)})}):null},We=a.memo((function({nrShows:e}){const t=(0,a.useContext)(E.H),{filter:s}=(0,a.useContext)(R.fo),{sortState:r}=(0,a.useContext)(_.Q),i=(0,a.useRef)(!1),c=(0,a.useRef)({entities:[],total:e}),[u,d]=(0,a.useState)(0),{user:m}=(0,n.v9)(le.Gg),{spec:h,UBIFragment:x}=(0,P.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:podcasts",identifier:l.Wg.YOURLIBRARY_SHOWS}}),f=(0,a.useMemo)((()=>h.headerFactory()),[h]),j=(0,a.useCallback)((async(e,a,n=!1)=>{if(!i.current){i.current=!n;const l=await t.getShows({offset:e,limit:a,filter:s,sort:(0,M.EY)(r)});c.current=function(e,t,s){const a={...s};return a.entities=t?e.items||[]:a.entities.concat(e.items||[]),a.total=e.totalLength,a}(l,n,c.current),i.current=!1,d((e=>e+1))}}),[t,s,r,c]),b=(0,a.useCallback)((e=>{c.current=function(e,t){const s={...t},a=t.entities.filter((t=>t.uri!==e));return s.total=(t.total||0)-(t.entities.length-a.length),s.entities=a,s}(e,c.current),d((e=>e+1))}),[]);(0,a.useEffect)((()=>{j(0,50,!!u)}),[s,r]);const y=(0,a.useCallback)((()=>{c.current.entities.length!==c.current.total&&j(c.current.entities.length,50)}),[j,c]);return(0,v.jsx)(x,{spec:h,children:(0,v.jsxs)(Ue.C,{onReachBottom:y,children:[(0,v.jsx)(x,{spec:f,children:(0,v.jsxs)("div",{className:W.Z.header,children:[(0,v.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("podcasts")}),(0,v.jsx)(a.Suspense,{fallback:null,children:(0,v.jsx)(Y.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.podcasts"),sortOptions:M.a6})})]})}),(0,v.jsx)(Ye.r,{onLibraryItemRemove:b,children:(0,v.jsx)(O.ZP,{value:"EntitiesGrid",children:(0,v.jsx)(De.T,{render:()=>{const e=(0,ie.bl)(m?.id),t=s||!e||0===c.current.entities.length?[]:[(0,v.jsx)(a.Suspense,{fallback:null,children:(0,v.jsx)(Me,{index:0})},"your-episodes-card")],n=t.length>0;return t.concat(c.current.entities.map(((e,t)=>{const s=n?t+1:t;return(0,v.jsx)(O.ZP,{value:"card",index:s,children:(0,v.jsx)(Oe._,{index:s,name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,sharingInfo:null})},e.uri)})))}})})})]})})})),Ze=a.memo((function(){const{total:e}=D(),{productState:t}=(0,n.v9)(le.Gg),s=!!t&&parseInt(t.ads,10)>0;return null===e?(0,v.jsx)(w.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-shows-failure")}):e?(0,v.jsx)(We,{nrShows:e}):(0,v.jsxs)("div",{className:f()(W.Z.emptyStateContainer,{[W.Z.adBarEnabled]:s}),children:[(0,v.jsx)(L.u,{linkTo:"/genre/podcasts-web",linkTitle:o.ag.get("collection.empty-page.shows-cta"),message:o.ag.get("collection.empty-page.shows-subtitle"),title:o.ag.get("collection.empty-page.shows-title"),renderInline:!0,children:(0,v.jsx)(N.t,{type:"show"})}),(0,v.jsx)(Te,{})]})})),He=a.memo((function(){return(0,v.jsx)(_.$,{uri:"collection/podcasts",defaultSortOption:M.rJ,children:(0,v.jsx)(R.hz,{uri:"collection/podcasts",children:(0,v.jsx)(Ze,{})})})}));var Ge=s(18161),Ke=s(89006),Ve=s(12725);const ze=({isAudiobooksEnabled:e})=>{const t=(0,n.v9)(m.rH),{spec:s,logger:r}=(0,P.fU)(Ge.createDesktopLibraryTopbarEventFactory,{}),i=(0,a.useMemo)((()=>[{title:o.ag.get("playlists"),itemId:"collection.tab-playlists",to:"/collection/playlists",uri:"spotify:app:collection:playlists"},...t?[{title:o.ag.get("podcasts"),itemId:"collection.tab-podcasts",to:"/collection/podcasts",uri:"spotify:app:collection:podcasts"}]:[],...e?[{title:o.ag.get("search.title.audiobooks"),itemId:"collection.tab-audiobooks",to:"/collection/audiobooks",uri:"spotify:app:collection:audiobooks"}]:[],{title:o.ag.get("artists"),itemId:"collection.tab-artists",to:"/collection/artists",uri:"spotify:app:collection:artists"},{title:o.ag.get("albums"),itemId:"collection.tab-albums",to:"/collection/albums",uri:"spotify:app:collection:albums"}].map(((e,t)=>{const a=e.uri;return{...e,handleClick:()=>{const e=s.linkFactory({position:t,uri:a}).hitUiNavigate({destination:a});r.logInteraction(e)}}}))),[t,e,r,s]);return(0,v.jsx)(Ve.w,{children:(0,v.jsx)(Ke.n,{className:W.Z.tabBar,links:i})})};var Qe=s(4658);const qe=a.lazy((async()=>await s.e(4246).then(s.bind(s,44621)))),Je=()=>{const e=(0,n.v9)(m.rH),t=(0,i.W6)(d.uBj);(0,u.z)("your_library");const{total:s}=U(),a=!!(s&&s>0);return(0,v.jsxs)("section",{className:"contentSpacing",children:[(0,v.jsx)(c.$,{children:o.ag.get("collection.page-title")}),(0,v.jsxs)(r.Z5,{children:[(0,v.jsx)(r.AW,{path:"artists",element:(0,v.jsx)(Qe.K,{pageId:l.Wg.YOURLIBRARY_ARTISTS,children:(0,v.jsx)(Q,{})})}),(0,v.jsx)(r.AW,{path:"albums",element:(0,v.jsx)(Qe.K,{pageId:l.Wg.YOURLIBRARY_ALBUMS,children:(0,v.jsx)(G,{})})}),(0,v.jsx)(r.AW,{path:"playlists",element:(0,v.jsx)(Qe.K,{pageId:l.Wg.YOURLIBRARY_PLAYLISTS,children:(0,v.jsx)(Ne,{})})}),e&&(0,v.jsx)(r.AW,{path:"podcasts",element:(0,v.jsx)(Qe.K,{pageId:l.Wg.YOURLIBRARY_SHOWS,children:(0,v.jsx)(He,{})})}),(t||a)&&(0,v.jsx)(r.AW,{path:"audiobooks",element:(0,v.jsx)(Qe.K,{pageId:l.Wg.YOURLIBRARY_AUDIOBOOKS,children:(0,v.jsx)(X,{})})}),(0,v.jsx)(r.AW,{path:"music-downloads",element:(0,v.jsx)(Qe.K,{pageId:l.Wg.YOURLIBRARY_DOWNLOADS,children:(0,v.jsx)(qe,{})})})]}),(0,v.jsx)(ze,{isAudiobooksEnabled:t||a})]})}},92103:(e,t,s)=>{s.d(t,{P:()=>b});var a=s(59496),n=s(85830),r=s(99302),i=s(38751),l=s(75792),o=s(37787),c=s(81767),u=s(36255),d=s(21066),m=s(77117),g=s(94062),p=s(17246),h=s(34703),x=s(45063),f=s(4637);const j=function({uri:e,name:t,images:s,index:o}){const j=(0,d.u)(),b=(0,a.useRef)(null),y=(0,a.useRef)(!0),C=(0,a.useContext)(m.t),{isPlaying:k}=(0,h.cR)(u.b),{togglePlay:v}=(0,p.n)({uri:u.b,pages:[{items:b.current?.map((e=>({...e,provider:null})))||[]}]},{featureIdentifier:"local_files"});(0,a.useEffect)((()=>(y.current=!0,()=>{y.current=!1})),[]);const I=(0,g.I)(),S=(0,n.y1)((async(e,t)=>{if(!b.current){const e=await C.getTracks();b.current=e}y&&v({loggingParams:t},{uri:u.b,pages:[{items:b.current?.map((e=>({...e,provider:null})))||[]}]})}),c.s_,{leading:!0,trailing:!1});return j.canFetchAllTracks&&I?(0,f.jsx)(i.Z,{index:o,delegatePlayback:!0,delegateLogging:!0,isPlaying:k,onPlay:S,headerText:t,featureIdentifier:"local_files",uri:e,renderCardImage:()=>(0,f.jsx)(l.x,{images:s,FallbackComponent:x.S}),renderSubHeaderContent:()=>(0,f.jsx)("span",{children:r.ag.get("local-files.description")})}):null},b=({index:e})=>{const t=(0,o.gB)();return(0,f.jsx)(a.Suspense,{fallback:null,children:(0,f.jsx)(j,{index:e,name:t.name,uri:t.uri,images:t.images})})}},36364:(e,t,s)=>{s.d(t,{x:()=>a.x});var a=s(93546)},47526:(e,t,s)=>{s.d(t,{P:()=>g});var a=s(59496),n=s(9102),r=s(31427),i=s(58943),l=s(55411),o=s(74834),c=s(99302),u=s(92627),d=s(31234),m=s(33660);const g=(e,t)=>{const s=(()=>{const e=(0,o.W6)(m.Xf),t=(0,l.v9)(u.rZ),{overrides:s}=(0,l.v9)(d.Gg),n=c.ag.getLocale(),r=s?.country||t,i=s?.locale||n;return(0,a.useMemo)((()=>{const t=["album","playlist","artist","show","station","episode","merch","artist_concerts"];return e&&t.push("uri_link"),{country:r,locale:i,types:t.join(",")}}),[r,e,i])})(),{data:g,fetchNextPage:p}=(0,n.useInfiniteQuery)(["useView",e,s],(async({pageParam:t})=>void 0===t?async function(e,t){const{body:s}=await i.kO.getView(r.b.getInstance(),e,t);return s}(e,s):async function(e){const t=new URL(e),s=t.origin,a=t.pathname,n=Object.fromEntries(t.searchParams.entries()),{body:l}=await i.TV.getGeneric(r.b.getInstance(),s,a,n,"/useView/fetchNext/{next}");return l}(t)),{cacheTime:t?.cacheTime??18e5,staleTime:t?.staleTime??3e5,getNextPageParam:e=>e.content.next??void 0,getPreviousPageParam:e=>e.content.previous??void 0});return{view:(0,a.useMemo)((()=>g?.pages.reduce(((e,t)=>({...e,content:{...e.content,href:t.content.href,next:t.content.next,offset:t.content.offset,previous:t.content.previous,total:t.content.total,items:e.content.items.concat(t.content.items)}})))),[g?.pages]),getNextPage:p}}},58992:(e,t,s)=>{s.d(t,{Z:()=>a});const a={header:"collection-collection-header",tabBar:"collection-collection-tabBar",AddToPlaylistIcon:"collection-collection-AddToPlaylistIcon",emptyStateContainer:"collection-collection-emptyStateContainer",adBarEnabled:"collection-collection-adBarEnabled"}}}]);
//# sourceMappingURL=xpui-routes-collection.js.map